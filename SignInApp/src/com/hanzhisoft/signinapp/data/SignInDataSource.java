package com.hanzhisoft.signinapp.data;import java.util.ArrayList;import java.util.List;import java.util.Map;import java.util.SortedSet;import java.util.TreeSet;import android.content.Context;import android.content.SharedPreferences;public class SignInDataSource {	private static final String PREFKEY = "signRecord";	private SharedPreferences signRecordItems;	public SignInDataSource(Context context) {		signRecordItems = context.getSharedPreferences(PREFKEY,				Context.MODE_PRIVATE);	}	public List<SignRecord> pullAll() {		Map<String, ?> signItems = signRecordItems.getAll();		SortedSet<String> keys = new TreeSet<String>(signItems.keySet());		List<SignRecord> signList = new ArrayList<SignRecord>();		for (String key : keys) {			SignRecord sr = new SignRecord();			String[] datas =  ((String) signItems.get(key)).split("###");			sr.setSignId(key);			sr.setAddress(datas[0]);			sr.setSignTime(datas[1]);			signList.add(sr);		}		return signList;	}	public boolean addSignRecord(SignRecord sr) {		if (sr.getSignId() != null && !sr.getSignId().equals("")) {			SharedPreferences.Editor editor = signRecordItems.edit();			editor.putString(sr.getSignId(), sr.getAddress()+"###"+sr.getSignTime());			editor.commit();			return true;		} else {			return false;		}	}		public void removeAll(){		Map<String, ?> signItems = signRecordItems.getAll();		SortedSet<String> keys = new TreeSet<String>(signItems.keySet());		List<SignRecord> signList = new ArrayList<SignRecord>();		for (String key : keys) {						SharedPreferences.Editor editor = signRecordItems.edit();			editor.remove(key);			editor.commit();		}	}}