package com.hanzhisoft.signinapp.user;import java.util.ArrayList;import java.util.List;import java.util.Map;import java.util.SortedSet;import java.util.TreeSet;import com.hanzhisoft.signinapp.data.SignRecord;import android.content.Context;import android.content.SharedPreferences;import android.content.SharedPreferences.Editor;public class UserDataSource {	private SharedPreferences preferences;	private final String lOGIN_STATE_KEY = "login_state";	private User user;	public UserDataSource(Context ctx) {		preferences = ctx.getSharedPreferences(lOGIN_STATE_KEY,				ctx.MODE_PRIVATE);	}	public boolean checkLoginState() {		if (preferences.contains("userName")) {			return true;		}		return false;	}	public User getUser() {		User user = new User();		Map<String, ?> signItems = preferences.getAll();		user.setUserName((String) signItems.get("userName"));		user.setUserPwd((String) signItems.get("userPwd"));		return user;	}	public void login(String username,String password){		Editor editor = preferences.edit();		editor.putString("userPwd", password);		editor.putString("userName", username);		editor.commit();	}	public void logout() {		Map<String, ?> signItems = preferences.getAll();		SortedSet<String> keys = new TreeSet<String>(signItems.keySet());		for (String key : keys) {			SharedPreferences.Editor editor = preferences.edit();			editor.remove(key);			editor.commit();		}	}}